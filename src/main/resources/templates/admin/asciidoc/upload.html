<!DOCTYPE html>
<html lang="en" th:replace="~{mopslayout :: html(name='Lernportfolio', title='Upload Template', headcontent=~{:: headcontent}, navigation=~{:: navigation}, bodycontent=~{:: bodycontent})}"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:fragment="headcontent">
        <th:block th:insert="common/dependencies :: dependencyFragment"></th:block>
    </th:block>

    <nav class="navigation navigation-secondary" is="mops-navigation" th:fragment="navigation">
    </nav>
</head>

<body th:fragment="bodycontent">

<h1 class="display-5">Portfolio Vorlage hochladen</h1>

<br>

<form enctype="multipart/form-data" method="POST" th:action="@{view}">

    <div class="input-group w-50">
        <div class="input-group-prepend">
            <label class="input-group-text" for="SELECT_PORTFOLIO">Vorlage ausw채hlen</label>
        </div>
        <select class="custom-select" id="SELECT_PORTFOLIO">
            <option th:each="template : ${templateList}" th:text="${template.getTitle()}"></option>
        </select>
    </div>

    <br>

    <div class="input-group w-50">
        <div class="input-group-prepend">
            <label class="input-group-text" for="SELECT_ENTRY">Entry ausw채hlen</label>
        </div>
        <select class="custom-select" id="SELECT_ENTRY">

        </select>
    </div>

    <br>

    <div class="input-group w-50">
        <div class="custom-file">
            <input accept=".adoc,.asciidoc,.asc,.txt" class="custom-file-input" id="INPUT_FILE" name="file" oninput="handleUpload()"
                   type="file">
            <label class="custom-file-label" for="INPUT_FILE" id="LABEL_FILE">AsciiDoc Datei ausw채hlen</label>
        </div>
        <div class="input-group-append">
            <button class="input-group-text btn" disabled id="BUTTON_UPLOAD" onclick="handleSubmit()"
                    type="submit">
                <span class="spinner-border spinner-border-sm" hidden id="SPINNER_UPLOAD"></span>
                Hochladen
            </button>
        </div>
    </div>

</form>

<script>

    function handleUpload() {

        let INPUT_FILE = document.getElementById("INPUT_FILE");
        if (INPUT_FILE.files.length == 0) {
            return;
        }

        let file = INPUT_FILE.files[0];

        let LABEL_FILE = document.getElementById("LABEL_FILE");
        LABEL_FILE.innerHTML = "Datei " + file.name.bold() + " ausgew채hlt";

        let BUTTON_UPLOAD = document.getElementById("BUTTON_UPLOAD");
        BUTTON_UPLOAD.disabled = false;
        BUTTON_UPLOAD.classList.add("btn-primary")
    }

    function handleSubmit() {
        let SPINNER_UPLOAD = document.getElementById("SPINNER_UPLOAD");
        SPINNER_UPLOAD.hidden = false;

        let SELECT_PORTFOLIO = document.getElementById("SELECT_PORTFOLIO");

    }
</script>

</body>
</html>