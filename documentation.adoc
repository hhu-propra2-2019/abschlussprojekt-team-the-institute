= Dokumentation

== Einführung und Ziele

=== Aufgabenstellung

. Was sind Lernportfolios?

.. Lernportfolios sind digitale Mappen, in denen die Arbeitsprozesse von Studenten festgehalten werden.
.. Sie dienen dazu Studenten über Fehler und Lernprozesse zu reflektieren.
.. Sie dienen als indirektes Feedback für Dozenten.

. Wesentliche Features

.. Vorlagen sind durch Dozenten vorgebbar.
.. Einzelne Journals können aus mehreren Beiträgen bestehen und sind immer einer Veranstaltung zugeordnet.

=== Qualitätsziele

|===

| Qualitätsziel | Erläuterung

| Benutzerfreundlichkeit | intuitives Anlegen von Portfolios

| Übersichtlichkeit | leichtes Zurechtfinden zwischen Einträgen

| Lerneffektivität | über Qualität und Brauchbarkeit des Wissens reflektieren

|===


=== Stakeholder

|===

| Wer ? | Welches Interesse?

| Dozenten | Es kann ein Überblick über die Lernprozesse der Studenten erhalten werden. Daher können Studenten fundiert bewertet werden.

| Studenten | Es kann über die Qualität und Brauchbarkeit des Wissens reflektiert werden. Dadurch wird der Lernerfolg erhöht.

|===

== Randbedingungen

=== Technische Randbedingungen

== Kontextabgrenzung

=== Bestandteile des Systems
. MinIO, damit Anhänge hinzugefügt werden können
//. Korrekturverteilung
//.. Code aus Projekt 4 aus ProPra 1 als Vorlage
//.. Aufteilen der Korrektorengruppe in einzelne Benutzer, dann Zuordnung zu einzelnen Portfolios/Journals

=== Externe Systeme und Schnittstelle
. Gruppenbildung, damit Gruppenportfolios möglich sind
. Keycloak: Die Authentifizierung muss eingebunden werden


== Lösungsstrategie
=== Aufbau

image::Diagramm.png[]

=== Integration mit anderen Systemen
==== Gruppenbildung
. Wir stellen einen GetRequest an die Schnittstelle der Gruppenbildung
.. welche Informationen benötigt die Gruppe von uns?
. Gruppenbildung gibt uns eine GruppenID mit Veranstaltung zurück
. Gruppenbildung übergibt uns eine Korrektorengruppe

==== Keycloak
. Die Authentifizierung wird hierüber gemacht.
. `application.properties`, sowie `KeycloakConfig` haben wir aus der "Keycloak Demo" übernommen.
. Die `application.properties` haben wir auf unser Projekt angepasst.

== Entscheidungen

=== Probleme

==== Bei der Integration

===== Gruppenbildung

. Wir hatten erst einmal Probleme das "realm" zu finden.
. HttpEntity hat nicht funktioniert, daher haben wir uns entschieden ResponseEntity zu nutzen.

===== Security

. Wie sind die IDs in "keycloak" gespeichert?
. Der Test `AccessRestriction` hat mit einem einfachen MockUser nicht funktioniert. Wir wurden dann durch ein 'TodayILearned' in Rocketchat auf `WithMockKeycloakAuth` aufmerksam.
.. Bei dem Einbau der dependency gab es Probleme, da wir JDK8 genutzt haben.
.. Wir sind dann auf JDK11 umgestiegen. Damit lief der Test durch. Die Applikation funktionierte weiterhin.
.. Gradle build funktionierte lokal, aber nicht beim push in github. Daher haben wir noch die github actions in JDK11 geändert.

===== Datenbank Update Service
. Da wir das genaue Format, das wir von der Gruppenbildung erhalten werden, noch nicht kennen,
konnten wir nur ein Gerüst entwickeln. Bislang ist nur bekannt, dass wir JSON verwenden werden.
. JUnit 5 nutzt anscheinend kein `@Test(expected = Exception.class)` mehr, sodass wir nach Alternativen suchen mussten.
So nutzen wir jetzt `Asserions.assertThrows`.
. Zum Testen des HttpClient haben wir uns entschieden, einen Interface und FakeHttpClient zu nutzen.
Der Response des Clients ist sofort schon die Response Body, wie wir später bemerkten.
. Auf private Felder einer Klasse kann man im Test leider nicht zugreifen.
Das Nutzen von `manifold.ext.api.Jailbreak` hilft auch nicht.
Wir haben das Problem gelöst, indem wir Felder und Methoden package-private eingestellt haben.
. Beim Testen müssen wir teilweise auch auf die Logeinträge achten.
Dazu mussten wir diese in einer Liste speichern.

==== Beim Bau des Frontends / der Website
. In unserem Mock haben wir Bootstrap verwendet, um neue Elemente anzeigen zu lassen. Dabei traten Probleme auf, was für uns ein Hinweis war, dass wir unser Design vereinfachen sollten.


== Konzepte

=== Domänenmodell

